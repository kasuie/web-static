(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4644],{29754:function(e,t,n){"use strict";n.d(t,{L:function(){return Z}});var r=n(59499),o=n(50029),i=n(87794),a=n.n(i),s=n(96193),c=n(45650),l=n(86979),d=n(68250),u=n(39372),f=n(34017),p=n(27690),h=n(97501),m=n(99025),x=n(97566),v=n(17055),b=n.n(v),g=n(67294),k=n(11187),y=n(95516),j=n(5152),_=n.n(j),P=n(85893);function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Z=function(e){var t=e.isLinkPage,r=void 0!==t&&t,i=e.coverProps,v=(0,g.useState)(!1),j=v[0],w=v[1],Z=(0,g.useState)(!1),A=Z[0],S=Z[1],N=(0,g.useState)(!1),C=N[0],E=N[1],M=_()((0,o.Z)(a().mark(function e(){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([n.e(2431),n.e(7557)]).then(n.bind(n,97557));case 2:return e.abrupt("return",e.sent.EmailOutline);case 3:case"end":return e.stop()}},e)})),{loadableGenerated:{webpack:function(){return[97557]}}}),z=(0,g.useState)({blogName:"",blogAddress:"",pictureAddress:"",email:"",detail:""}),I=z[0],U=z[1],W=function(){w(!0),console.log("add>>>>>")},T=function(){if(E(!0),I.email&&!D(I.email))return k.ZP.error("请检查邮箱格式~");I.blogName&&I.blogAddress&&I.pictureAddress&&(S(!0),E(!1),y.WY.post("/api/friend/save",I).then(function(e){e.success?(k.ZP.success("提交成功，请确保自己网站已添加本站为友链哦~"),w(!1)):k.ZP.error(e.message),S(!1)}).catch(function(){return S(!1)}))},D=function(e){return e.match(/^[A-Z0-9._%+-]+@[A-Z0-9.-]+.[A-Z]{2,4}$/i)},L=(0,g.useMemo)(function(){if(!I.email)return{text:"",color:""};var e=D(I.email);return{text:e&&!C?"":"邮箱格式不正确",color:e&&!C?"primary":"error"}},[I.email,C]),q=(0,g.useMemo)(function(){return I.blogAddress||C?{text:I.blogAddress?"":"请输入友链地址",color:I.blogAddress?"primary":"error"}:{text:"",color:""}},[I.blogAddress,C]),B=(0,g.useMemo)(function(){return I.blogName||C?{text:I.blogName?"":"请输入友链名称",color:I.blogName?"primary":"error"}:{text:"",color:""}},[I.blogName,C]),R=(0,g.useMemo)(function(){return I.pictureAddress||C?{text:I.pictureAddress?"":"请输入友链图标地址",color:I.pictureAddress?"primary":"error"}:{text:"",color:""}},[I.pictureAddress,C]);return(0,P.jsx)(x.B,O(O({},void 0===i?{}:i),{},{content:(0,P.jsxs)("div",{className:b()["k-about-content"],children:[!r&&(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)("h4",{children:"Tips："}),(0,P.jsx)("p",{children:"请使用真实的邮箱，不要打广告，引流什么的，一旦发现会被删除的，谢谢。"})]}),(0,P.jsxs)("p",{children:["友链添加：",(0,P.jsx)(s.ZP,{onPress:function(){return W()},css:{margin:"0 10px 0 0"},children:"请戳此处"}),"输入友链信息提交即可。请注意提交时请在自己网站把本站添加为友链哦~"]}),(0,P.jsx)(m.J,{className:b()["k-about-main-markdown"],content:"\n        blogName: 'KASUIEの次元'  #网站的名称\n        blogAddress: 'https://kasuie.top' #网站的地址\n        pictureAddress: 'https://i.loli.net/2020/11/19/hY1NXDLvmkRptTi.jpg' #网站的图标/或你的头像\n        detail: '喜欢温柔的人' #网站的描述\n    "}),!r&&(0,P.jsx)("p",{children:"私信：你可以去这里查看我的联系方式，或者在下方留言并勾选“私密评论”。"}),(0,P.jsxs)(c.ZP,{closeButton:!0,blur:!0,preventClose:!0,"aria-labelledby":"apply filendlink",width:"500px",open:j,onClose:function(){w(!1)},css:{maxWidth:"94vw",margin:"0 auto"},children:[(0,P.jsx)(c.ZP.Header,{children:(0,P.jsx)(l.Z,{size:18,children:"友链信息"})}),(0,P.jsxs)(c.ZP.Body,{css:{gap:"$sm"},children:[(0,P.jsx)(d.ZP,{required:!0,clearable:!0,bordered:!0,fullWidth:!0,"aria-labelledby":"modal-title",size:"lg",placeholder:"友链名称",status:B.color,color:B.color,helperColor:B.color,helperText:B.text,onChange:function(e){U(O(O({},I),{},{blogName:e.target.value}))}}),(0,P.jsx)(d.ZP,{required:!0,clearable:!0,bordered:!0,fullWidth:!0,"aria-labelledby":"modal-title",size:"lg",placeholder:"友链地址",status:q.color,color:q.color,helperColor:q.color,helperText:q.text,onChange:function(e){U(O(O({},I),{},{blogAddress:e.target.value}))}}),(0,P.jsx)(d.ZP,{required:!0,clearable:!0,bordered:!0,fullWidth:!0,"aria-labelledby":"modal-title",size:"lg",placeholder:"友链图标",status:R.color,color:R.color,helperColor:R.color,helperText:R.text,contentLeft:I.pictureAddress&&(0,P.jsx)(u.ZP,{size:"sm",src:I.pictureAddress,pointer:!0}),onBlur:function(e){U(O(O({},I),{},{pictureAddress:e.target.value}))}}),(0,P.jsx)(d.ZP,{required:!0,clearable:!0,bordered:!0,fullWidth:!0,size:"lg",placeholder:"联系邮箱（非必填，添加成功后会发邮件给你）",status:L.color,color:L.color,helperColor:L.color,helperText:L.text,"aria-labelledby":"modal-title",contentLeft:(0,P.jsx)(M,{}),onChange:function(e){E(!1),U(O(O({},I),{},{email:e.target.value}))}}),(0,P.jsx)(f.Z,{required:!0,bordered:!0,fullWidth:!0,maxLength:100,color:"primary",size:"lg","aria-labelledby":"modal-title",placeholder:"友链描述",onChange:function(e){U(O(O({},I),{},{detail:e.target.value}))},minRows:2,maxRows:5})]}),(0,P.jsxs)(c.ZP.Footer,{justify:"flex-end",children:[(0,P.jsx)(p.ZP,{auto:!0,flat:!0,color:"error",onPress:function(){return w(!1)},children:"关闭"}),(0,P.jsx)(p.ZP,{auto:!0,onPress:function(){return T()},icon:A&&(0,P.jsx)(h.ZP,{color:"currentColor",size:"xs"}),children:"提交"})]})]})]})}))}},18246:function(e,t,n){"use strict";n.d(t,{k:function(){return p}});var r=n(96193),o=n(86979),i=n(39372),a=n(67294),s=n(9594),c=n.n(s),l=n(95516),d=n(11187),u=n(40077),f=n(85893),p=function(e){var t=e.link,n=(0,a.useState)(!1),s=n[0],p=n[1],h=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(n){var r=u.Z.l.get("user",!0);r&&r.level>1?l.WY.postQs("/api/friend/status",{id:e,status:1,notice:!0}).then(function(e){d.ZP.success(e.message)}):d.ZP.error("权限不足")}else s&&e&&t?window.open(t,"_blank"):e&&t?(l.WY.postQs("/api/friend/view",{id:e}).then(function(){window.open(t,"_blank")}).catch(function(){return window.open(t,"_blank")}),p(!0)):d.ZP.info("缺少关键信息，跳转失败~")};return(0,f.jsxs)("div",{className:c()["k-link-card"],children:[(0,f.jsxs)("div",{className:c()["k-link-card-info-hover"],children:[(0,f.jsx)("i",{className:c()["k-link-card-info-like"]}),(0,f.jsx)(r.ZP,{className:c()["k-link-card-info-enter"],color:"primary",isExternal:!0,css:{fontSize:"14px"},onPress:function(){return h(t.id,t.blogAddress,0===t.status)},children:0===t.status?"审批通过":"点击前往"})]}),(0,f.jsx)(o.Z,{className:c()["k-link-card-desc"],children:t.detail}),(0,f.jsx)("div",{className:c()["k-link-card-img-hover"],style:{backgroundImage:"url('".concat(t.pictureAddress,"')")}}),(0,f.jsxs)("div",{className:c()["k-link-card-info"],onClick:function(){return h(t.id,t.blogAddress)},children:[(0,f.jsx)(i.ZP,{size:"md",src:t.pictureAddress,color:"primary",bordered:!0,zoomed:!0,pointer:!0}),(0,f.jsx)(o.Z,{children:t.blogName})]})]})}},99025:function(e,t,n){"use strict";n.d(t,{J:function(){return v}});var r=n(59499),o=n(4730),i=n(41157),a=n(45146),s=n(76199),c=n(93179),l=n(84283),d=n(97501),u=n(39837),f=n(71455);n(62428);var p=n(85893),h=["node","inline","className","children"];function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var v=function(e){var t=e.content;return(0,p.jsx)(i.D,{children:t,rehypePlugins:[a.Z],remarkPlugins:[s.Z],components:{code:function(e){e.node;var t=e.inline,n=e.className,r=e.children,i=(0,o.Z)(e,h),a=/language-(\w+)/.exec(n||"");return!t&&a?(0,p.jsx)(c.Z,x(x({},i),{},{children:String(r).replace(/\n$/,""),style:l.vk,language:a[1],PreTag:"div"})):(0,p.jsx)("code",x(x({},i),{},{className:n,children:r}))},img:function(e){var t=e.src,n=e.alt;return(0,p.jsx)(f.TV,{maskOpacity:.7,loadingElement:(0,p.jsx)(d.ZP,{children:"加载中..."}),children:(0,p.jsx)(f.HI,{src:t,children:(0,p.jsx)(u.ZP,{showSkeleton:!0,src:t,alt:n,loading:"lazy",objectFit:"cover",css:{maxHeight:"320px",borderRadius:"5px",padding:"2px"}})})},n)}}})}},53578:function(e,t,n){"use strict";var r=n(67294),o=n(86979),i=n(52914),a=n.n(i),s=n(85893);t.Z=function(e){var t=e.tabs,n=e.onProxy,i=(0,r.useState)(0),c=i[0],l=i[1],d=(0,r.useState)({}),u=d[0],f=d[1];(0,r.useEffect)(function(){f({left:"".concat(100*c+10,"px")})},[c]);var p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;l(e),n("switch",t)};return(0,s.jsxs)("div",{className:a()["k-tabs"],children:[(0,s.jsx)("div",{className:a()["k-tabs-line"],style:u}),(0,s.jsx)("ul",{className:a()["k-tabs-main"],children:t&&t.map(function(e,t){return(0,s.jsx)("li",{className:a()["".concat(c===t?"k-tabs-tab-active":"")],onClick:function(){return p(t,e.code)},children:(0,s.jsx)(o.Z,{span:!0,children:e.title})},t)})})]})}},97566:function(e,t,n){"use strict";n.d(t,{B:function(){return s}});var r=n(43950),o=n(22893),i=n.n(o),a=n(85893),s=function(e){var t=e.content,n=e.header,o=e.cover,s=e.hiddenProgress;return(0,a.jsxs)("div",{className:i()["k-top"],children:[(0,a.jsx)("div",{className:"".concat(i()["k-top-cover"]," ").concat(n?i()["k-top-cover-has"]:""),style:{backgroundImage:"url(".concat(o||"https://i.loli.net/2021/07/16/UwkpdyfvRr1nVKj.png",")")},children:n}),(0,a.jsxs)("div",{className:i()["k-top-main"],children:[t,!(void 0!==s&&s)&&(0,a.jsx)(r.ZP,{color:"primary",size:"xs",value:100,css:{margin:"20px 0"}})]})]})}},17285:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AmpStateContext=void 0;var r=(0,n(92648).Z)(n(67294)).default.createContext({});t.AmpStateContext=r},80354:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isInAmpMode=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.ampFirst,n=e.hybrid,r=e.hasQuery;return void 0!==t&&t||void 0!==n&&n&&void 0!==r&&r}},16505:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultHead=d,t.default=void 0;var r=n(6495).Z,o=n(92648).Z,i=(0,n(91598).Z)(n(67294)),a=o(n(70148)),s=n(17285),c=n(60523),l=n(80354);function d(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=[i.default.createElement("meta",{charSet:"utf-8"})];return e||t.push(i.default.createElement("meta",{name:"viewport",content:"width=device-width"})),t}function u(e,t){return"string"==typeof t||"number"==typeof t?e:t.type===i.default.Fragment?e.concat(i.default.Children.toArray(t.props.children).reduce(function(e,t){return"string"==typeof t||"number"==typeof t?e:e.concat(t)},[])):e.concat(t)}n(92783);var f=["name","httpEquiv","charSet","itemProp"];function p(e,t){var n,o,a,s,c=t.inAmpMode;return e.reduce(u,[]).reverse().concat(d(c).reverse()).filter((n=new Set,o=new Set,a=new Set,s={},function(e){var t=!0,r=!1;if(e.key&&"number"!=typeof e.key&&e.key.indexOf("$")>0){r=!0;var i=e.key.slice(e.key.indexOf("$")+1);n.has(i)?t=!1:n.add(i)}switch(e.type){case"title":case"base":o.has(e.type)?t=!1:o.add(e.type);break;case"meta":for(var c=0,l=f.length;c<l;c++){var d=f[c];if(e.props.hasOwnProperty(d)){if("charSet"===d)a.has(d)?t=!1:a.add(d);else{var u=e.props[d],p=s[d]||new Set;("name"!==d||!r)&&p.has(u)?t=!1:(p.add(u),s[d]=p)}}}}return t})).reverse().map(function(e,t){var n=e.key||t;if(!c&&"link"===e.type&&e.props.href&&["https://fonts.googleapis.com/css","https://use.typekit.net/"].some(function(t){return e.props.href.startsWith(t)})){var o=r({},e.props||{});return o["data-href"]=o.href,o.href=void 0,o["data-optimized-fonts"]=!0,i.default.cloneElement(e,o)}return i.default.cloneElement(e,{key:n})})}t.default=function(e){var t=e.children,n=i.useContext(s.AmpStateContext),r=i.useContext(c.HeadManagerContext);return i.default.createElement(a.default,{reduceComponentsToState:p,headManager:r,inAmpMode:l.isInAmpMode(n)},t)},("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},70148:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,n=e.headManager,s=e.reduceComponentsToState;function c(){if(n&&n.mountedInstances){var t=r.Children.toArray(Array.from(n.mountedInstances).filter(Boolean));n.updateHead(s(t,e))}}return o&&(null==n||null==(t=n.mountedInstances)||t.add(e.children),c()),i(function(){var t;return null==n||null==(t=n.mountedInstances)||t.add(e.children),function(){var t;null==n||null==(t=n.mountedInstances)||t.delete(e.children)}}),i(function(){return n&&(n._pendingUpdate=c),function(){n&&(n._pendingUpdate=c)}}),a(function(){return n&&n._pendingUpdate&&(n._pendingUpdate(),n._pendingUpdate=null),function(){n&&n._pendingUpdate&&(n._pendingUpdate(),n._pendingUpdate=null)}}),null};var r=(0,n(91598).Z)(n(67294)),o=!1,i=r.useLayoutEffect,a=o?function(){}:r.useEffect},92783:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.warnOnce=void 0,t.warnOnce=function(e){}},99082:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSP:function(){return x},default:function(){return v}});var r=n(76687),o=n(50889),i=n(43165),a=n(95516),s=n(67294),c=n(63437),l=n(18246),d=n(29754),u=n(53578),f=n(9008),p=n.n(f),h=n(40077),m=n(85893),x=!0;function v(e){var t=e.statistics,n=e.links,f=(0,s.useState)(1),x=f[0],v=f[1],b=(0,s.useState)([]),g=b[0],k=b[1],y=(0,s.useState)(!1),j=(y[0],y[1]);(0,s.useEffect)(function(){n&&k(n)},[n]);var _=(0,s.useState)([{title:"友情链接",code:1},{title:"失联中",code:2}]),P=_[0],w=_[1];return(0,s.useEffect)(function(){var e=h.Z.l.get("user",!0);e&&e.level>2&&2===P.length&&w([].concat((0,r.Z)(P),[{title:"申请列表",code:0}]))},[]),(0,m.jsxs)("div",{children:[(0,m.jsxs)(p(),{children:[(0,m.jsx)("title",{children:"友链"}),(0,m.jsx)("meta",{name:"description",content:"KASUIEの次元，友情链接"})]}),(0,m.jsx)(o.A,{statistics:t,sider:(0,m.jsx)(c.o,{statistics:t}),content:(0,m.jsxs)(i.Z,{sm:!0,children:[(0,m.jsx)(d.L,{coverProps:{hiddenProgress:!0,cover:"https://cdn.staticaly.com/gh/pixlips/picx-images-hosting@master/web/MukaEnd.4y0qra24vtw0.jpg"},isLinkPage:!0}),(0,m.jsx)(u.Z,{tabs:P,onProxy:function(e,t){"submit"===e||"delete"===e?j(!0):"switch"===e&&(t!=x&&a.WY.get("/api/friend/friends",{status:t}).then(function(e){e.success&&k(e.data)}),v(t))}}),(0,m.jsx)("div",{style:{display:"flex",gap:"10px",padding:"36px 0",justifyContent:"space-between",flexWrap:"wrap"},children:g&&g.map(function(e,t){return(0,m.jsx)(l.k,{link:e},t)})})]})})]})}},41465:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/link",function(){return n(99082)}])},17055:function(e){e.exports={"k-about-content":"index_k-about-content__f_Uq1"}},9594:function(e){e.exports={"k-link-card":"index_k-link-card__qDDar","k-link-card-info":"index_k-link-card-info__jig8g","k-link-card-desc":"index_k-link-card-desc__i9rkr","k-link-card-img-hover":"index_k-link-card-img-hover___qlU3","k-link-card-info-hover":"index_k-link-card-info-hover__KWpRC","k-link-card-info-enter":"index_k-link-card-info-enter__BLf25"}},52914:function(e){e.exports={"k-tabs":"index_k-tabs__9i_RG","k-tabs-line":"index_k-tabs-line__hyxfy","k-tabs-main":"index_k-tabs-main__VW_z9","k-tabs-tab-active":"index_k-tabs-tab-active__Lgm4_"}},22893:function(e){e.exports={"k-top":"index_k-top__JCoCl","k-top-cover":"index_k-top-cover__qh5tO","k-top-cover-has":"index_k-top-cover-has__LhE1J","k-top-main":"index_k-top-main__hAbdV"}},9008:function(e,t,n){e.exports=n(16505)},76687:function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function o(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(e,t)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}n.d(t,{Z:function(){return o}})}},function(e){e.O(0,[4885,279,1187,8250,230,7851,9774,2888,179],function(){return e(e.s=41465)}),_N_E=e.O()}]);