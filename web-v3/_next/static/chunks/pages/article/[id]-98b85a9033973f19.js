(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8888],{17285:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AmpStateContext=void 0;var r=(0,n(92648).Z)(n(67294)).default.createContext({});t.AmpStateContext=r},80354:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isInAmpMode=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.ampFirst,n=e.hybrid,r=e.hasQuery;return void 0!==t&&t||void 0!==n&&n&&void 0!==r&&r}},16505:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultHead=u,t.default=void 0;var r=n(6495).Z,a=n(92648).Z,i=(0,n(91598).Z)(n(67294)),c=a(n(70148)),s=n(17285),o=n(60523),d=n(80354);function u(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=[i.default.createElement("meta",{charSet:"utf-8"})];return e||t.push(i.default.createElement("meta",{name:"viewport",content:"width=device-width"})),t}function l(e,t){return"string"==typeof t||"number"==typeof t?e:t.type===i.default.Fragment?e.concat(i.default.Children.toArray(t.props.children).reduce(function(e,t){return"string"==typeof t||"number"==typeof t?e:e.concat(t)},[])):e.concat(t)}n(92783);var f=["name","httpEquiv","charSet","itemProp"];function p(e,t){var n,a,c,s,o=t.inAmpMode;return e.reduce(l,[]).reverse().concat(u(o).reverse()).filter((n=new Set,a=new Set,c=new Set,s={},function(e){var t=!0,r=!1;if(e.key&&"number"!=typeof e.key&&e.key.indexOf("$")>0){r=!0;var i=e.key.slice(e.key.indexOf("$")+1);n.has(i)?t=!1:n.add(i)}switch(e.type){case"title":case"base":a.has(e.type)?t=!1:a.add(e.type);break;case"meta":for(var o=0,d=f.length;o<d;o++){var u=f[o];if(e.props.hasOwnProperty(u)){if("charSet"===u)c.has(u)?t=!1:c.add(u);else{var l=e.props[u],p=s[u]||new Set;("name"!==u||!r)&&p.has(l)?t=!1:(p.add(l),s[u]=p)}}}}return t})).reverse().map(function(e,t){var n=e.key||t;if(!o&&"link"===e.type&&e.props.href&&["https://fonts.googleapis.com/css","https://use.typekit.net/"].some(function(t){return e.props.href.startsWith(t)})){var a=r({},e.props||{});return a["data-href"]=a.href,a.href=void 0,a["data-optimized-fonts"]=!0,i.default.cloneElement(e,a)}return i.default.cloneElement(e,{key:n})})}t.default=function(e){var t=e.children,n=i.useContext(s.AmpStateContext),r=i.useContext(o.HeadManagerContext);return i.default.createElement(c.default,{reduceComponentsToState:p,headManager:r,inAmpMode:d.isInAmpMode(n)},t)},("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},70148:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,n=e.headManager,s=e.reduceComponentsToState;function o(){if(n&&n.mountedInstances){var t=r.Children.toArray(Array.from(n.mountedInstances).filter(Boolean));n.updateHead(s(t,e))}}return a&&(null==n||null==(t=n.mountedInstances)||t.add(e.children),o()),i(function(){var t;return null==n||null==(t=n.mountedInstances)||t.add(e.children),function(){var t;null==n||null==(t=n.mountedInstances)||t.delete(e.children)}}),i(function(){return n&&(n._pendingUpdate=o),function(){n&&(n._pendingUpdate=o)}}),c(function(){return n&&n._pendingUpdate&&(n._pendingUpdate(),n._pendingUpdate=null),function(){n&&n._pendingUpdate&&(n._pendingUpdate(),n._pendingUpdate=null)}}),null};var r=(0,n(91598).Z)(n(67294)),a=!1,i=r.useLayoutEffect,c=a?function(){}:r.useEffect},92783:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.warnOnce=void 0,t.warnOnce=function(e){}},84969:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSP:function(){return E},default:function(){return M}});var r=n(4730),a=n(59499),i=n(50029),c=n(87794),s=n.n(c),o=n(86979),d=n(43165),u=n(95516),l=n(67294),f=n(11187),p=n(30381),m=n.n(p),h=n(80820),v=n(52361),_=n.n(v),x=n(40077),y=n(9008),b=n.n(y),j=n(5152),k=n.n(j),g=n(85893),w=["content"];function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach(function(t){(0,a.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Z=k()((0,i.Z)(s().mark(function e(){return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(6178).then(n.bind(n,16178));case 2:return e.abrupt("return",e.sent.Time);case 3:case"end":return e.stop()}},e)})),{loadableGenerated:{webpack:function(){return[16178]}}}),C=k()((0,i.Z)(s().mark(function e(){return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(1281).then(n.bind(n,71281));case 2:return e.abrupt("return",e.sent.EyeOutline);case 3:case"end":return e.stop()}},e)})),{loadableGenerated:{webpack:function(){return[71281]}}}),S=k()((0,i.Z)(s().mark(function e(){return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(2146).then(n.bind(n,32146));case 2:return e.abrupt("return",e.sent.CommentDots);case 3:case"end":return e.stop()}},e)})),{loadableGenerated:{webpack:function(){return[32146]}}}),E=!0;function M(e){var t,n=e.id,a=e.cid,i=e.data,c=e.statistics,s=i.articles[0][0],p=i.comments[0].filter(function(e){return"-1"!=e.site}),v=(0,l.useState)(0),y=v[0],j=v[1],k=(0,l.useState)([]),O=k[0],E=k[1],M=(0,l.useState)(!1),A=M[0],N=M[1],I=(0,l.useState)(),D=I[0],U=I[1];return(0,l.useEffect)(function(){var e=x.Z.l.get("user",!0);e&&U(e)},[]),(0,g.jsx)(h.Ar,{sider:(0,g.jsx)(h.ow,{statistics:c}),content:(0,g.jsxs)(d.Z,{sm:!0,className:_()["k-article"],children:[(0,g.jsx)(b(),{children:(0,g.jsxs)("title",{children:[" ",s?"".concat(s.title):"文章"]})}),(0,g.jsx)(h.Bk,{cover:s.topImg,hiddenProgress:!0,header:(s.content,t=(0,r.Z)(s,w),(0,g.jsxs)("div",{className:_()["k-article-header"],children:[(0,g.jsxs)("div",{className:_()["k-article-header-main"],children:[(0,g.jsxs)("div",{className:_()["k-article-header-main-title"],children:[(0,g.jsx)("span",{className:_()["k-article-header-main-dot"]}),(0,g.jsx)(o.Z,{css:{fontSize:"20px",paddingLeft:"37px",fontWeight:"600"},children:t.title})]}),(0,g.jsxs)(o.Z,{children:[(0,g.jsx)(Z,{size:16}),(0,g.jsx)(o.Z,{span:!0,children:"发表于"}),(0,g.jsx)(o.Z,{span:!0,children:m()(t.createTime).format("YYYY-MM-DD HH:mm:ss")})]}),(0,g.jsxs)(o.Z,{children:[(0,g.jsx)(C,{size:16}),(0,g.jsx)(o.Z,{span:!0,children:"浏览量"}),(0,g.jsx)(o.Z,{span:!0,children:t.views})]}),t.commentable&&(0,g.jsxs)(o.Z,{children:[(0,g.jsx)(S,{size:13}),(0,g.jsx)(o.Z,{span:!0,children:"评论数"}),(0,g.jsx)(o.Z,{span:!0,children:t.countsComment})]})]}),(0,g.jsx)(h.HE,{name:"cover",data:t})]})),content:(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(h.Jf,{className:"k-article-md",content:s.content}),(0,g.jsx)(h.rN,{onProxy:function(e,t){if("submit"===e||"delete"===e){N(!0);var r="submit"===e?P(P({},t),{},{aid:n}):{cid:t.id};u.WY["submit"===e?"post":"postQs"]("submit"===e?"/api/saveComment":"/api/deleteCmt",r).then(function(e){e.success?(f.ZP.success("操作成功"),u.WY.get("/api/getCommentsByAid?aid=".concat(n)).then(function(e){var t=e.success,n=e.data;t?E(n.filter(function(e){return"-1"!=e.site})):E([]),j(Date.now()),N(!1)})):(f.ZP.error("操作失败"),N(!1))}).catch(function(){return N(!1)})}},isLoading:A,activeId:a,user:D,data:O.length&&O||p,maps:{id:"cid",replys:"replyComments",isAdmin:"adminCmt",parentId:"parentCmtId",isPrivate:"privateCmt"}},y)]})})]})})}},2913:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/article/[id]",function(){return n(84969)}])},52361:function(e){e.exports={"k-article-header":"id_k-article-header__oAkEo","k-article-header-main":"id_k-article-header-main__rtFw8","k-article-header-main-dot":"id_k-article-header-main-dot__HxCPX","k-article-header-main-title":"id_k-article-header-main-title__i9dDh","k-article-header-main-time":"id_k-article-header-main-time__zYrN1","k-article":"id_k-article__TGj4l"}},9008:function(e,t,n){e.exports=n(16505)}},function(e){e.O(0,[4885,2431,279,1187,8250,230,2518,162,4875,7851,8992,6808,9774,2888,179],function(){return e(e.s=2913)}),_N_E=e.O()}]);