(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8888],{51001:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSP:function(){return T},default:function(){return I}});var r=n(4730),i=n(59499),s=n(50029),a=n(87794),c=n.n(a),o=n(86979),d=n(43165),u=n(95516),l=n(67294),p=n(57598),h=n(30381),m=n.n(h),f=n(80820),x=n(44800),j=n(27690),k=n(25675),b=n.n(k),_=n(85893);function w(e){return(0,_.jsx)("div",{style:{padding:"30px 0 20px 0",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,_.jsxs)(x.Z,{placement:"top",isBordered:!0,shouldCloseOnBlur:!0,children:[(0,_.jsx)(x.Z.Trigger,{children:(0,_.jsx)(j.ZP,{flat:!0,onClick:function(){return window.open("https://afdian.net/a/kasuie","_blank")},children:"Support"})}),(0,_.jsx)(x.Z.Content,{children:(0,_.jsx)(b(),{src:"https://cdn.staticaly.com/gh/pixlips/picx-images-hosting@master/next/afdian-kasuie.75drw6n8qz00.jpg",alt:"爱发电",width:200,height:250,style:{padding:"20px"}})})]})})}var g=n(52361),v=n.n(g),Z=n(40077),y=n(9008),O=n.n(y),P=n(5152),C=n.n(P),N=["content"];function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var D=C()((0,s.Z)(c().mark(function e(){return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(6178).then(n.bind(n,16178));case 2:return e.abrupt("return",e.sent.Time);case 3:case"end":return e.stop()}},e)})),{loadableGenerated:{webpack:function(){return[16178]}}}),Y=C()((0,s.Z)(c().mark(function e(){return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(1281).then(n.bind(n,71281));case 2:return e.abrupt("return",e.sent.EyeOutline);case 3:case"end":return e.stop()}},e)})),{loadableGenerated:{webpack:function(){return[71281]}}}),z=C()((0,s.Z)(c().mark(function e(){return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(2146).then(n.bind(n,32146));case 2:return e.abrupt("return",e.sent.CommentDots);case 3:case"end":return e.stop()}},e)})),{loadableGenerated:{webpack:function(){return[32146]}}}),T=!0;function I(e){var t,n=e.id,i=e.cid,s=e.data,a=e.statistics,c=s.articles[0][0],h=s.comments[0].filter(function(e){return"-1"!=e.site}),x=(0,l.useState)(0),j=x[0],k=x[1],b=(0,l.useState)([]),g=b[0],y=b[1],P=(0,l.useState)(!1),C=P[0],E=P[1],T=(0,l.useState)(),I=T[0],A=T[1];return(0,l.useEffect)(function(){var e=Z.Z.l.get("user",!0);e&&A(e)},[]),(0,_.jsx)(f.Ar,{sider:(0,_.jsx)(f.ow,{statistics:a}),content:(0,_.jsxs)(d.Z,{sm:!0,className:v()["k-article"],children:[(0,_.jsx)(O(),{children:(0,_.jsxs)("title",{children:[" ",c?"".concat(c.title):"文章"]})}),(0,_.jsx)(f.Bk,{cover:c.topImg,hiddenProgress:!0,header:(c.content,t=(0,r.Z)(c,N),(0,_.jsxs)("div",{className:v()["k-article-header"],children:[(0,_.jsxs)("div",{className:v()["k-article-header-main"],children:[(0,_.jsxs)("div",{className:v()["k-article-header-main-title"],children:[(0,_.jsx)("span",{className:v()["k-article-header-main-dot"]}),(0,_.jsx)(o.Z,{css:{fontSize:"20px",paddingLeft:"37px",fontWeight:"600"},children:t.title})]}),(0,_.jsxs)(o.Z,{children:[(0,_.jsx)(D,{size:16}),(0,_.jsx)(o.Z,{span:!0,children:"发表于"}),(0,_.jsx)(o.Z,{span:!0,children:m()(t.createTime).format("YYYY-MM-DD HH:mm:ss")})]}),(0,_.jsxs)(o.Z,{children:[(0,_.jsx)(Y,{size:16}),(0,_.jsx)(o.Z,{span:!0,children:"浏览量"}),(0,_.jsx)(o.Z,{span:!0,children:t.views})]}),t.commentable&&(0,_.jsxs)(o.Z,{children:[(0,_.jsx)(z,{size:13}),(0,_.jsx)(o.Z,{span:!0,children:"评论数"}),(0,_.jsx)(o.Z,{span:!0,children:t.countsComment})]})]}),(0,_.jsx)(f.HE,{name:"cover",data:t})]})),content:(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(f.Jf,{className:"k-article-md",content:c.content}),(0,_.jsx)(w,{}),(0,_.jsx)(f.rN,{onProxy:function(e,t){if("submit"===e||"delete"===e){E(!0);var r="submit"===e?S(S({},t),{},{aid:n}):{cid:t.id};u.WY["submit"===e?"post":"postQs"]("submit"===e?"/api/saveComment":"/api/deleteCmt",r).then(function(e){e.success?(p.ZP.success("操作成功"),u.WY.get("/api/getCommentsByAid?aid=".concat(n)).then(function(e){var t=e.success,n=e.data;t?y(n.filter(function(e){return"-1"!=e.site})):y([]),k(Date.now()),E(!1)})):(p.ZP.error("操作失败"),E(!1))}).catch(function(){return E(!1)})}},isLoading:C,activeId:i,user:I,data:g.length&&g||h,maps:{id:"cid",replys:"replyComments",isAdmin:"adminCmt",parentId:"parentCmtId",isPrivate:"privateCmt"}},j)]})})]})})}},2913:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/article/[id]",function(){return n(51001)}])},52361:function(e){e.exports={"k-article-header":"id_k-article-header__oAkEo","k-article-header-main":"id_k-article-header-main__rtFw8","k-article-header-main-dot":"id_k-article-header-main-dot__HxCPX","k-article-header-main-title":"id_k-article-header-main-title__i9dDh","k-article-header-main-time":"id_k-article-header-main-time__zYrN1","k-article":"id_k-article__TGj4l"}},9008:function(e,t,n){e.exports=n(16505)}},function(e){e.O(0,[4885,8281,1785,8250,7952,7822,2518,162,4875,7851,9754,3588,2202,9774,2888,179],function(){return e(e.s=2913)}),_N_E=e.O()}]);