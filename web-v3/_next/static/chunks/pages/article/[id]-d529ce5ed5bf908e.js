(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8888],{2913:function(e,t,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/article/[id]",function(){return i(6645)}])},6645:function(e,t,i){"use strict";i.r(t),i.d(t,{__N_SSP:function(){return y},default:function(){return P}});var s=i(5893),n=i(6979),a=i(3165),r=i(647),c=i(7294),d=i(1899),l=i(381),o=i.n(l),h=i(5647),m=i(4800),p=i(7690),x=i(5675),u=i.n(x);function j(e){return(0,s.jsx)("div",{style:{padding:"30px 0 20px 0",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,s.jsxs)(m.Z,{placement:"top",isBordered:!0,shouldCloseOnBlur:!0,children:[(0,s.jsx)(m.Z.Trigger,{children:(0,s.jsx)(p.ZP,{flat:!0,onClick:()=>window.open("https://afdian.net/a/kasuie","_blank"),children:"Support"})}),(0,s.jsx)(m.Z.Content,{children:(0,s.jsx)(u(),{src:"https://cdn.staticaly.com/gh/pixlips/picx-images-hosting@master/next/afdian-kasuie.75drw6n8qz00.jpg",alt:"爱发电",width:200,height:250,style:{padding:"20px"}})})]})})}var _=i(2361),k=i.n(_),f=i(5838),g=i(9008),w=i.n(g),Z=i(5152),b=i.n(Z);let C=b()(async()=>(await i.e(6178).then(i.bind(i,6178))).Time,{loadableGenerated:{webpack:()=>[6178]},ssr:!1}),v=b()(async()=>(await i.e(1281).then(i.bind(i,1281))).EyeOutline,{loadableGenerated:{webpack:()=>[1281]},ssr:!1}),N=b()(async()=>(await i.e(2146).then(i.bind(i,2146))).CommentDots,{loadableGenerated:{webpack:()=>[2146]},ssr:!1});var y=!0;function P(e){let{id:t,cid:i,data:l,statistics:m}=e,p=l.articles[0][0],x=l.comments[0].filter(e=>"-1"!=e.site),[u,_]=(0,c.useState)(0),[g,Z]=(0,c.useState)([]),[b,y]=(0,c.useState)(!1),[P,E]=(0,c.useState)();(0,c.useEffect)(()=>{let e=f.Z.l.get("user",!0);e&&E(e)},[]);let S=(e,i)=>{if("submit"===e||"delete"===e){y(!0);let s="submit"===e?{...i,aid:t}:{cid:i.id};r.WY["submit"===e?"post":"postQs"]("submit"===e?"/api/saveComment":"/api/deleteCmt",s).then(e=>{e.success?(d.ZP.success("操作成功"),r.WY.get("/api/getCommentsByAid?aid=".concat(t)).then(e=>{let{success:t,data:i}=e;t?Z(i.filter(e=>"-1"!=e.site)):Z([]),_(Date.now()),y(!1)})):(d.ZP.error("操作失败"),y(!1))}).catch(()=>y(!1))}};return(0,s.jsx)(h.Ar,{sider:(0,s.jsx)(h.ow,{statistics:m}),content:(0,s.jsxs)(a.Z,{sm:!0,className:k()["k-article"],children:[(0,s.jsx)(w(),{children:(0,s.jsxs)("title",{children:[" ",p?"".concat(p.title):"文章"]})}),(0,s.jsx)(h.Bk,{cover:p.topImg,hiddenProgress:!0,header:(e=>{let{content:t,...i}=e;return(0,s.jsxs)("div",{className:k()["k-article-header"],children:[(0,s.jsxs)("div",{className:k()["k-article-header-main"],children:[(0,s.jsxs)("div",{className:k()["k-article-header-main-title"],children:[(0,s.jsx)("span",{className:k()["k-article-header-main-dot"]}),(0,s.jsx)(n.Z,{css:{fontSize:"20px",paddingLeft:"37px",fontWeight:"600"},children:i.title})]}),(0,s.jsxs)(n.Z,{children:[(0,s.jsx)(C,{size:16}),(0,s.jsx)(n.Z,{span:!0,children:"发表于"}),(0,s.jsx)(n.Z,{span:!0,children:o()(i.createTime).format("YYYY-MM-DD HH:mm:ss")})]}),(0,s.jsxs)(n.Z,{children:[(0,s.jsx)(v,{size:16}),(0,s.jsx)(n.Z,{span:!0,children:"浏览量"}),(0,s.jsx)(n.Z,{span:!0,children:i.views})]}),i.commentable&&(0,s.jsxs)(n.Z,{children:[(0,s.jsx)(N,{size:13}),(0,s.jsx)(n.Z,{span:!0,children:"评论数"}),(0,s.jsx)(n.Z,{span:!0,children:i.countsComment})]})]}),(0,s.jsx)(h.HE,{name:"cover",data:i})]})})(p),content:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(h.Jf,{className:"k-article-md",content:p.content}),(0,s.jsx)(j,{}),(0,s.jsx)(h.rN,{onProxy:S,isLoading:b,activeId:i,user:P,data:g.length&&g||x,maps:{id:"cid",replys:"replyComments",isAdmin:"adminCmt",parentId:"parentCmtId",isPrivate:"privateCmt"}},u)]})})]})})}},2361:function(e){e.exports={"k-article-header":"id_k-article-header__oAkEo","k-article-header-main":"id_k-article-header-main__rtFw8","k-article-header-main-dot":"id_k-article-header-main-dot__HxCPX","k-article-header-main-title":"id_k-article-header-main-title__i9dDh","k-article-header-main-time":"id_k-article-header-main-time__zYrN1","k-article":"id_k-article__TGj4l"}},9008:function(e,t,i){e.exports=i(3121)}},function(e){e.O(0,[4885,8100,8250,7952,6222,2518,162,4875,102,8798,6746,1019,9774,2888,179],function(){return e(e.s=2913)}),_N_E=e.O()}]);