(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8888],{2913:function(e,t,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/article/[id]",function(){return i(6645)}])},6645:function(e,t,i){"use strict";i.r(t),i.d(t,{__N_SSP:function(){return v},default:function(){return N}});var n=i(5893),s=i(6979),a=i(3165),r=i(647),c=i(7294),d=i(1899),l=i(5647),o=i(4800),h=i(7690),m=i(5675),p=i.n(m);function x(e){return(0,n.jsx)("div",{style:{padding:"30px 0 20px 0",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,n.jsxs)(o.Z,{placement:"top",isBordered:!0,shouldCloseOnBlur:!0,children:[(0,n.jsx)(o.Z.Trigger,{children:(0,n.jsx)(h.ZP,{flat:!0,onClick:()=>window.open("https://afdian.net/a/kasuie","_blank"),children:"Support"})}),(0,n.jsx)(o.Z.Content,{children:(0,n.jsx)(p(),{src:"https://cdn.staticaly.com/gh/pixlips/picx-images-hosting@master/next/afdian-kasuie.75drw6n8qz00.jpg",alt:"爱发电",width:200,height:250,style:{padding:"20px"}})})]})})}var u=i(2361),j=i.n(u),_=i(5838),k=i(9008),f=i.n(k),g=i(5152),w=i.n(g);let Z=w()(async()=>(await i.e(6178).then(i.bind(i,6178))).Time,{loadableGenerated:{webpack:()=>[6178]},ssr:!1}),b=w()(async()=>(await i.e(1281).then(i.bind(i,1281))).EyeOutline,{loadableGenerated:{webpack:()=>[1281]},ssr:!1}),C=w()(async()=>(await i.e(2146).then(i.bind(i,2146))).CommentDots,{loadableGenerated:{webpack:()=>[2146]},ssr:!1});var v=!0;function N(e){let{id:t,cid:i,data:o,statistics:h}=e,m=o.articles[0][0],p=o.comments[0].filter(e=>"-1"!=e.site),[u,k]=(0,c.useState)(0),[g,w]=(0,c.useState)([]),[v,N]=(0,c.useState)(!1),[y,P]=(0,c.useState)();(0,c.useEffect)(()=>{let e=_.Z.l.get("user",!0);e&&P(e)},[]);let E=(e,i)=>{if("submit"===e||"delete"===e){N(!0);let n="submit"===e?{...i,aid:t}:{cid:i.id};r.WY["submit"===e?"post":"postQs"]("submit"===e?"/api/saveComment":"/api/deleteCmt",n).then(e=>{e.success?(d.ZP.success("操作成功"),r.WY.get("/api/getCommentsByAid?aid=".concat(t)).then(e=>{let{success:t,data:i}=e;t?w(i.filter(e=>"-1"!=e.site)):w([]),k(Date.now()),N(!1)})):(d.ZP.error("操作失败"),N(!1))}).catch(()=>N(!1))}};return(0,n.jsx)(l.Ar,{sider:(0,n.jsx)(l.ow,{statistics:h}),content:(0,n.jsxs)(a.Z,{sm:!0,className:j()["k-article"],children:[(0,n.jsx)(f(),{children:(0,n.jsxs)("title",{children:[" ",m?"".concat(m.title):"文章"]})}),(0,n.jsx)(l.Bk,{cover:m.topImg,hiddenProgress:!0,header:(e=>{let{content:t,...i}=e;return(0,n.jsxs)("div",{className:j()["k-article-header"],children:[(0,n.jsxs)("div",{className:j()["k-article-header-main"],children:[(0,n.jsxs)("div",{className:j()["k-article-header-main-title"],children:[(0,n.jsx)("span",{className:j()["k-article-header-main-dot"]}),(0,n.jsx)(s.Z,{css:{fontSize:"20px",paddingLeft:"37px",fontWeight:"600"},children:i.title})]}),(0,n.jsxs)(s.Z,{children:[(0,n.jsx)(Z,{size:16}),(0,n.jsx)(s.Z,{span:!0,children:"发表于"}),(0,n.jsx)(s.Z,{span:!0,children:(0,r.vc)(i.createTime)})]}),(0,n.jsxs)(s.Z,{children:[(0,n.jsx)(b,{size:16}),(0,n.jsx)(s.Z,{span:!0,children:"浏览量"}),(0,n.jsx)(s.Z,{span:!0,children:i.views})]}),i.commentable&&(0,n.jsxs)(s.Z,{children:[(0,n.jsx)(C,{size:13}),(0,n.jsx)(s.Z,{span:!0,children:"评论数"}),(0,n.jsx)(s.Z,{span:!0,children:i.countsComment})]})]}),(0,n.jsx)(l.HE,{name:"cover",data:i})]})})(m),content:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.Jf,{className:"k-article-md",content:m.content}),(0,n.jsx)(x,{}),(0,n.jsx)(l.rN,{onProxy:E,isLoading:v,activeId:i,user:y,data:g.length&&g||p,maps:{id:"cid",replys:"replyComments",isAdmin:"adminCmt",parentId:"parentCmtId",isPrivate:"privateCmt"}},u)]})})]})})}},2361:function(e){e.exports={"k-article-header":"id_k-article-header__oAkEo","k-article-header-main":"id_k-article-header-main__rtFw8","k-article-header-main-dot":"id_k-article-header-main-dot__HxCPX","k-article-header-main-title":"id_k-article-header-main-title__i9dDh","k-article-header-main-time":"id_k-article-header-main-time__zYrN1","k-article":"id_k-article__TGj4l"}},9008:function(e,t,i){e.exports=i(3121)}},function(e){e.O(0,[1359,8250,7952,6222,2518,162,4875,102,8798,6746,1019,9774,2888,179],function(){return e(e.s=2913)}),_N_E=e.O()}]);