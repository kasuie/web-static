(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8888],{84969:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSP:function(){return E},default:function(){return D}});var r=n(4730),i=n(59499),a=n(50029),s=n(87794),c=n.n(s),o=n(86979),d=n(43165),u=n(95516),l=n(67294),m=n(11187),p=n(30381),f=n.n(p),h=n(80820),j=n(52361),x=n.n(j),b=n(40077),_=n(9008),k=n.n(_),w=n(5152),v=n.n(w),O=n(85893),Z=["content"];function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var y=v()((0,a.Z)(c().mark(function e(){return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(6178).then(n.bind(n,16178));case 2:return e.abrupt("return",e.sent.Time);case 3:case"end":return e.stop()}},e)})),{loadableGenerated:{webpack:function(){return[16178]}}}),N=v()((0,a.Z)(c().mark(function e(){return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(1281).then(n.bind(n,71281));case 2:return e.abrupt("return",e.sent.EyeOutline);case 3:case"end":return e.stop()}},e)})),{loadableGenerated:{webpack:function(){return[71281]}}}),C=v()((0,a.Z)(c().mark(function e(){return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(2146).then(n.bind(n,32146));case 2:return e.abrupt("return",e.sent.CommentDots);case 3:case"end":return e.stop()}},e)})),{loadableGenerated:{webpack:function(){return[32146]}}}),E=!0;function D(e){var t,n=e.id,i=e.cid,a=e.data,s=e.statistics,c=a.articles[0][0],p=a.comments[0].filter(function(e){return"-1"!=e.site}),j=(0,l.useState)(0),_=j[0],w=j[1],v=(0,l.useState)([]),g=v[0],E=v[1],D=(0,l.useState)(!1),S=D[0],Y=D[1],z=(0,l.useState)(),T=z[0],A=z[1];return(0,l.useEffect)(function(){var e=b.Z.l.get("user",!0);e&&A(e)},[]),(0,O.jsx)(h.Ar,{sider:(0,O.jsx)(h.ow,{statistics:s}),content:(0,O.jsxs)(d.Z,{sm:!0,className:x()["k-article"],children:[(0,O.jsx)(k(),{children:(0,O.jsxs)("title",{children:[" ",c?"".concat(c.title):"文章"]})}),(0,O.jsx)(h.Bk,{cover:c.topImg,hiddenProgress:!0,header:(c.content,t=(0,r.Z)(c,Z),(0,O.jsxs)("div",{className:x()["k-article-header"],children:[(0,O.jsxs)("div",{className:x()["k-article-header-main"],children:[(0,O.jsxs)("div",{className:x()["k-article-header-main-title"],children:[(0,O.jsx)("span",{className:x()["k-article-header-main-dot"]}),(0,O.jsx)(o.Z,{css:{fontSize:"20px",paddingLeft:"37px",fontWeight:"600"},children:t.title})]}),(0,O.jsxs)(o.Z,{children:[(0,O.jsx)(y,{size:16}),(0,O.jsx)(o.Z,{span:!0,children:"发表于"}),(0,O.jsx)(o.Z,{span:!0,children:f()(t.createTime).format("YYYY-MM-DD HH:mm:ss")})]}),(0,O.jsxs)(o.Z,{children:[(0,O.jsx)(N,{size:16}),(0,O.jsx)(o.Z,{span:!0,children:"浏览量"}),(0,O.jsx)(o.Z,{span:!0,children:t.views})]}),t.commentable&&(0,O.jsxs)(o.Z,{children:[(0,O.jsx)(C,{size:13}),(0,O.jsx)(o.Z,{span:!0,children:"评论数"}),(0,O.jsx)(o.Z,{span:!0,children:t.countsComment})]})]}),(0,O.jsx)(h.HE,{name:"cover",data:t})]})),content:(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(h.Jf,{className:"k-article-md",content:c.content}),(0,O.jsx)(h.rN,{onProxy:function(e,t){if("submit"===e||"delete"===e){Y(!0);var r="submit"===e?P(P({},t),{},{aid:n}):{cid:t.id};u.WY["submit"===e?"post":"postQs"]("submit"===e?"/api/saveComment":"/api/deleteCmt",r).then(function(e){e.success?(m.ZP.success("操作成功"),u.WY.get("/api/getCommentsByAid?aid=".concat(n)).then(function(e){var t=e.success,n=e.data;t?E(n.filter(function(e){return"-1"!=e.site})):E([]),w(Date.now()),Y(!1)})):(m.ZP.error("操作失败"),Y(!1))}).catch(function(){return Y(!1)})}},isLoading:S,activeId:i,user:T,data:g.length&&g||p,maps:{id:"cid",replys:"replyComments",isAdmin:"adminCmt",parentId:"parentCmtId",isPrivate:"privateCmt"}},_)]})})]})})}},2913:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/article/[id]",function(){return n(84969)}])},52361:function(e){e.exports={"k-article-header":"id_k-article-header__oAkEo","k-article-header-main":"id_k-article-header-main__rtFw8","k-article-header-main-dot":"id_k-article-header-main-dot__HxCPX","k-article-header-main-title":"id_k-article-header-main-title__i9dDh","k-article-header-main-time":"id_k-article-header-main-time__zYrN1","k-article":"id_k-article__TGj4l"}},9008:function(e,t,n){e.exports=n(16505)}},function(e){e.O(0,[4885,2431,765,1187,8250,7952,8893,2518,162,4875,7851,8992,6808,9774,2888,179],function(){return e(e.s=2913)}),_N_E=e.O()}]);